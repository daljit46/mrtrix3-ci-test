find_program(BASH bash)

set(DATA_DIR ${CMAKE_CURRENT_SOURCE_DIR}/data)


include(BashTests)
function(add_bash_binary_tests file_path)
    set(EXEC_DIRS ${CMAKE_CURRENT_BINARY_DIR})
    list(APPEND EXEC_DIRS ${PROJECT_BINARY_DIR}/bin)
    list(APPEND EXEC_DIRS ${PROJECT_BINARY_DIR}/testing/tools)

    add_bash_tests(
        FILE_PATH "${file_path}"
        PREFIX "bin"
        WORKING_DIRECTORY ${DATA_DIR}
        EXEC_DIRECTORIES "${EXEC_DIRS}"
    )
endfunction()

add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/5tt2gmwmi)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/5tt2vis)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/5ttedit)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/amp2sh)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/connectomeedit)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/dirgen)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/dwi2adc)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/dwi2fod)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/dwi2tensor)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/dwidenoise)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/dwiextract)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixel2peaks)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixel2sh)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixel2tsf)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixel2voxel)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixelcfestats)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixelconnectivity)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixelconvert)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixelcorrespondence)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixelcrop)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixelfilter)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fixelreorient)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fod2dec)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/fod2fixel)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/label2colour)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/label2mesh)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/labelconvert)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/maskfilter)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mesh2voxel)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/meshconvert)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrcalc)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrcat)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrclusterstats)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrcolour)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrconvert)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrdegibbs)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrfilter)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrgrid)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrhistmatch)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrhistogram)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrmath)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrregister)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrstats)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrthreshold)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mrtransform)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/mtnormalise)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/peaks2amp)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/peaks2fixel)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/sh2amp)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/sh2peaks)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/sh2power)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/sh2response)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/shbasis)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/shconv)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tck2connectome)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tckconvert)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tckedit)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tckgen)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tckmap)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tckresample)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tcksample)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tcksift)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tcksift2)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tcktransform)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tensor2metric)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/transformcalc)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/transformcompose)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/transformconvert)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tsfdivide)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tsfmult)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tsfsmooth)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/tsfthreshold)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/vectorstats)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/voxel2fixel)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/warp2metric)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/warpcorrect)
add_bash_binary_tests(${CMAKE_CURRENT_SOURCE_DIR}/tests/warpinit)